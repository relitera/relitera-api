generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model courses {
  id             String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name           String           @db.VarChar(255)
  description    String
  price          Decimal          @db.Decimal(10, 2)
  thumb_url      String?
  course_classes course_classes[]
  user_courses   user_courses[]
}

model user_courses {
  user_id    String    @db.Uuid
  course_id  String    @db.Uuid
  created_at DateTime? @default(now()) @db.Timestamptz(6)
  courses    courses   @relation(fields: [course_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users      users     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([user_id, course_id])
}

model users {
  id           String         @id @db.Uuid
  name         String?        @db.VarChar(250)
  email        String?        @unique @db.VarChar(120)
  password     String?        @db.VarChar(525)
  token        String?        @db.VarChar(325)
  birthdate    DateTime?      @db.Date
  user_courses user_courses[]
}

model course_classes {
  id           String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name         String    @db.VarChar(500)
  description  String
  duration_sec Int
  course_id    String    @db.Uuid
  created_at   DateTime? @default(now()) @db.Timestamptz(6)
  video_url    String
  done         Boolean   @default(false)
  courses      courses   @relation(fields: [course_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}
